'use strict';
const cp = require('child_process');
const util = require('util');

const execFile = util.promisify(cp.execFile);

/**
 * Quits an app safely using System Events.
 * @param {string} bundleid - application's bundle identifier.
 * @returns {Void} if the app quit successfully.
 * @throws {Error} if the app failed to quit.
 */
module.exports = async bundleid => {
    try {
        let result = await execFile('/usr/bin/osascript', ['-e', `tell application id "${bundleid}" to quit`])
        return result.stdout.trim()
    } catch (error) {
        throw error
    }
};
