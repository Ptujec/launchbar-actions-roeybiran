"use strict";

const util = require("util");
const cp = require("child_process");

const execFile = util.promisify(cp.execFile);

/**
 * @param {String} program - a program/file to execute.
 * @param {String[]} args - the program's arguments.
 * @param {Object} options - any of the child_process.execFile options.
 */
module.exports.execFile = async (program, args, options) => {
  try {
    const result = await execFile(program, args, {
      maxBuffer: 1000 * 1000 * 100,
      ...options
    });
    return {
      stdout: result.stdout.trim(),
      stderr: result.stderr.trim()
    };
  } catch (error) {
    throw error;
  }
};
