'use strict';
const cp = require('child_process');
const util = require('util');

const execFile = util.promisify(cp.execFile);

/**
 * Asynchronously returns the bundle id of the frontmost app.
 * @returns {string} the bundle identifier for the frontmost app.
 */
module.exports = async () => {
    try {
        let result = await execFile('/usr/bin/osascript', ['-e',
            'tell application "System Events" to return bundle identifier of application process 1 whose frontmost of it = true'
        ])
        return result.stdout.trim()
    } catch (error) {
        throw error
    }
};
