'use strict';
const path = require('path')
const plist = require('simple-plist')
const util = require('util')

const readPlistAsync = util.promisify(plist.readFile)

/**
* asynchronously get the bundle id of an app.
* @param {String} appPath an absolute path to to an .app bundle.
* @returns {(String|undefined)} the app's bundle id, or undefined if no bundle identifier could be found.
*/
module.exports.async = async appPath => {
    try {
        let plistPath = path.join(appPath, '/Contents/Info.plist')
        let result = await readPlistAsync(plistPath)
        return result.CFBundleIdentifier
    } catch (error) {
        return error
    }
};
